services:
  - type: web
    name: todo-api
    env: image
    image: ghcr.io/duongxuannam/r_t_y_b:latest
    plan: free
    autoDeploy: true
    healthCheckPath: /api/health
    envVars:
      - key: APP_ENV
        value: production
      - key: BIND_ADDR
        value: 0.0.0.0:$PORT
      - key: STATIC_DIR
        value: /app/dist
      - key: DATABASE_URL
        value: postgresql://neondb_owner:npg_iXe4wTtBaj2p@ep-bold-band-a1o5brcy-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require
      - key: JWT_SECRET
        generateValue: true
      - key: ACCESS_TOKEN_TTL_MIN
        value: "60"
      - key: REFRESH_TOKEN_TTL_DAYS
        value: "7"
      - key: ALLOWED_ORIGINS
        value: https://todo-api-zx6d.onrender.com
      - key: RATE_LIMIT_PER_SECOND
        value: "20"
      - key: RATE_LIMIT_BURST
        value: "40"
      - key: REFRESH_COOKIE_NAME
        value: todo_refresh
      - key: REFRESH_COOKIE_SECURE
        value: "true"
      - key: SMTP_HOST
        value: smtp.example.com
      - key: SMTP_PORT
        value: "587"
      - key: SMTP_USERNAME
        value: your-username
      - key: SMTP_PASSWORD
        value: your-password
      - key: SMTP_FROM
        value: no-reply@example.com
      - key: SMTP_FROM_NAME
        value: Todo App
      - key: PASSWORD_RESET_URL_BASE
        value: https://todo-api-zx6d.onrender.com
      - key: PASSWORD_RESET_TTL_MIN
        value: "30"
