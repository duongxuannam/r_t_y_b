import { appState } from '../state/appState'
import type { LanguageId } from '../state/appState'

const translations = {
  en: {
    'nav.mainApp': 'Main App',
    'nav.about': 'About',
    'nav.auth': 'Auth',
    'header.menu': 'Menu',
    'header.openMenu': 'Open menu',
    'header.logout': 'Logout',
    'header.guest': 'Guest',
    'header.navigate': 'Navigate',
    'header.close': 'Close',
    'header.closeMenu': 'Close menu',
    'header.theme': 'Theme',
    'header.guestMode': 'Guest mode',
    'language.label': 'Language',
    'language.english': 'English',
    'language.vietnamese': 'Vietnamese',
    'language.switchToEnglish': 'Switch to English',
    'language.switchToVietnamese': 'Switch to Vietnamese',
    'theme.light': 'Light',
    'theme.dark': 'Dark',
    'about.overview': 'Overview',
    'about.title': 'A modern dashboard for the Rust Todo API',
    'about.description':
      'This UI now uses shadcn/ui components on top of Tailwind, paired with Legend State for local state and TanStack Query for server data.',
    'about.highlights': 'Tech highlights',
    'about.legendState': 'Reactive global store for auth + theme.',
    'about.tanstack': 'Query caching + mutations for todos.',
    'about.shadcn': 'Reusable components with a clean, modern Tailwind foundation.',
    'auth.secureAccess': 'Secure access',
    'auth.title': 'Authenticate',
    'auth.subtitle': 'Connect with the Rust API to manage todos with JWT auth.',
    'auth.jwtPowered': 'JWT powered',
    'auth.tab.reset': 'Reset',
    'auth.tab.login': 'Login',
    'auth.tab.register': 'Register',
    'auth.tab.forgot': 'Forgot',
    'auth.email': 'Email',
    'auth.emailPlaceholder': 'Email address',
    'auth.password': 'Password',
    'auth.passwordPlaceholder': 'Enter your password',
    'auth.working': 'Working...',
    'auth.continue': 'Continue',
    'auth.forgotHint': 'We will email a reset link if the account exists.',
    'auth.sending': 'Sending...',
    'auth.sendReset': 'Send reset email',
    'auth.resetToken': 'Reset token',
    'auth.resetTokenPlaceholder': 'Paste your reset token',
    'auth.newPassword': 'New password',
    'auth.newPasswordPlaceholder': 'Create a new password',
    'auth.updating': 'Updating...',
    'auth.resetPassword': 'Reset password',
    'auth.passwordHint': 'Use 8+ characters with a mix of letters and numbers.',
    'auth.failure': 'Authentication failed',
    'auth.successTitle': 'Success',
    'auth.success': 'Authenticated successfully.',
    'auth.requestFailed': 'Auth request failed.',
    'auth.checklist': 'Auth checklist',
    'auth.checklistSubtitle': 'What happens after you connect your account.',
    'auth.accessRefresh': 'Access + refresh',
    'auth.accessRefreshDescription':
      'Keep the access token in memory and local storage for fast requests.',
    'auth.tokenRenewal': 'Token renewal',
    'auth.tokenRenewalDescription':
      'Use the refresh endpoint when you add automatic token rotation.',
    'auth.apiCalls': 'API calls',
    'auth.apiCallsDescription': 'Always send Authorization: Bearer <token>.',
    'auth.accountRecovery': 'Account recovery',
    'auth.accountRecoveryDescription': 'Use the reset token sent to your inbox.',
    'auth.requestHeader': 'Request header',
    'todo.title': 'Todo Control',
    'todo.subtitle': 'Track tasks synced with the Rust API.',
    'todo.total': 'Total',
    'todo.completed': 'Completed',
    'todo.loginRequired': 'Login required',
    'todo.loginRequiredDescription': 'Please login first to sync todos with the API.',
    'todo.empty': 'No todos yet. Add one to get started.',
    'todo.updated': 'Updated',
    'todo.delete': 'Delete',
    'todo.create': 'Create todo',
    'todo.createSubtitle': 'Add a new task to your personal list.',
    'todo.titlePlaceholder': 'Todo title',
    'todo.saving': 'Saving...',
    'todo.add': 'Add todo',
    'todo.loginBeforeCreate': 'Login required before creating tasks.',
    'todo.close': 'Close',
    'todo.closeCreateModal': 'Close create todo modal',
    'errors.unableToLoadTodos': 'Unable to load todos.',
    'errors.requestFailed': 'Request failed.',
  },
  vi: {
    'nav.mainApp': 'Trang chính',
    'nav.about': 'Giới thiệu',
    'nav.auth': 'Xác thực',
    'header.menu': 'Menu',
    'header.openMenu': 'Mở menu',
    'header.logout': 'Đăng xuất',
    'header.guest': 'Khách',
    'header.navigate': 'Điều hướng',
    'header.close': 'Đóng',
    'header.closeMenu': 'Đóng menu',
    'header.theme': 'Giao diện',
    'header.guestMode': 'Chế độ khách',
    'language.label': 'Ngôn ngữ',
    'language.english': 'Tiếng Anh',
    'language.vietnamese': 'Tiếng Việt',
    'language.switchToEnglish': 'Chuyển sang tiếng Anh',
    'language.switchToVietnamese': 'Chuyển sang tiếng Việt',
    'theme.light': 'Sáng',
    'theme.dark': 'Tối',
    'about.overview': 'Tổng quan',
    'about.title': 'Bảng điều khiển hiện đại cho Rust Todo API',
    'about.description':
      'Giao diện này sử dụng shadcn/ui trên nền Tailwind, kết hợp Legend State cho trạng thái cục bộ và TanStack Query cho dữ liệu máy chủ.',
    'about.highlights': 'Điểm nổi bật công nghệ',
    'about.legendState': 'Kho trạng thái toàn cục phản ứng cho auth + giao diện.',
    'about.tanstack': 'Bộ nhớ đệm truy vấn + mutation cho todos.',
    'about.shadcn': 'Thành phần tái sử dụng với nền tảng Tailwind hiện đại.',
    'auth.secureAccess': 'Truy cập an toàn',
    'auth.title': 'Xác thực',
    'auth.subtitle': 'Kết nối với Rust API để quản lý todo bằng JWT.',
    'auth.jwtPowered': 'Hỗ trợ JWT',
    'auth.tab.reset': 'Đặt lại',
    'auth.tab.login': 'Đăng nhập',
    'auth.tab.register': 'Đăng ký',
    'auth.tab.forgot': 'Quên mật khẩu',
    'auth.email': 'Email',
    'auth.emailPlaceholder': 'Địa chỉ email',
    'auth.password': 'Mật khẩu',
    'auth.passwordPlaceholder': 'Nhập mật khẩu',
    'auth.working': 'Đang xử lý...',
    'auth.continue': 'Tiếp tục',
    'auth.forgotHint': 'Chúng tôi sẽ gửi email đặt lại nếu tài khoản tồn tại.',
    'auth.sending': 'Đang gửi...',
    'auth.sendReset': 'Gửi email đặt lại',
    'auth.resetToken': 'Mã đặt lại',
    'auth.resetTokenPlaceholder': 'Dán mã đặt lại',
    'auth.newPassword': 'Mật khẩu mới',
    'auth.newPasswordPlaceholder': 'Tạo mật khẩu mới',
    'auth.updating': 'Đang cập nhật...',
    'auth.resetPassword': 'Đặt lại mật khẩu',
    'auth.passwordHint': 'Dùng 8+ ký tự gồm chữ và số.',
    'auth.failure': 'Xác thực thất bại',
    'auth.successTitle': 'Thành công',
    'auth.success': 'Xác thực thành công.',
    'auth.requestFailed': 'Yêu cầu xác thực thất bại.',
    'auth.checklist': 'Danh sách xác thực',
    'auth.checklistSubtitle': 'Những gì xảy ra sau khi bạn kết nối tài khoản.',
    'auth.accessRefresh': 'Truy cập + làm mới',
    'auth.accessRefreshDescription':
      'Giữ access token trong bộ nhớ và local storage để truy vấn nhanh.',
    'auth.tokenRenewal': 'Gia hạn token',
    'auth.tokenRenewalDescription':
      'Dùng endpoint refresh khi bạn thêm cơ chế xoay vòng token.',
    'auth.apiCalls': 'Gọi API',
    'auth.apiCallsDescription': 'Luôn gửi Authorization: Bearer <token>.',
    'auth.accountRecovery': 'Khôi phục tài khoản',
    'auth.accountRecoveryDescription': 'Dùng mã đặt lại được gửi đến hộp thư.',
    'auth.requestHeader': 'Header yêu cầu',
    'todo.title': 'Quản lý todo',
    'todo.subtitle': 'Theo dõi tác vụ đồng bộ với Rust API.',
    'todo.total': 'Tổng',
    'todo.completed': 'Hoàn thành',
    'todo.loginRequired': 'Cần đăng nhập',
    'todo.loginRequiredDescription': 'Vui lòng đăng nhập để đồng bộ todo với API.',
    'todo.empty': 'Chưa có todo. Hãy thêm một mục mới.',
    'todo.updated': 'Cập nhật',
    'todo.delete': 'Xóa',
    'todo.create': 'Tạo todo',
    'todo.createSubtitle': 'Thêm tác vụ mới vào danh sách cá nhân.',
    'todo.titlePlaceholder': 'Tiêu đề todo',
    'todo.saving': 'Đang lưu...',
    'todo.add': 'Thêm todo',
    'todo.loginBeforeCreate': 'Cần đăng nhập trước khi tạo tác vụ.',
    'todo.close': 'Đóng',
    'todo.closeCreateModal': 'Đóng hộp tạo todo',
    'errors.unableToLoadTodos': 'Không thể tải danh sách todo.',
    'errors.requestFailed': 'Yêu cầu thất bại.',
  },
} as const

export type TranslationKey = keyof typeof translations.en

export const t = (key: TranslationKey): string => {
  const language = appState.language.get()
  return translations[language]?.[key] ?? translations.en[key] ?? key
}

export const getNextLanguage = (language: LanguageId): LanguageId =>
  language === 'en' ? 'vi' : 'en'
